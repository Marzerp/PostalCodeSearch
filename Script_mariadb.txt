This is the scrip used to create the "codigos_postales" database and the single table "cp" consisting of 15 attributes in mariadb. The code to insert the data of Mexican Postal Codes from SEPOMEX into the database is also written below, make sure to add your own path in the field "LOAD DATA LOCAL INFILE" for proper execution. 

1. Create Database

CREATE DATABASE codigos_postales;
USE codigos_postales;

2. Create table 

CREATE TABLE cp (
d_codigo VARCHAR(5) NOT NULL,
d_asenta VARCHAR(120) NOT NULL,
d_tipo_asenta VARCHAR(60) NULL,
D_mnpio VARCHAR(100) NOT NULL,
d_estado VARCHAR(100) NOT NULL,
d_ciudad VARCHAR(100) NULL,
d_CP VARCHAR(5) NULL,
c_estado VARCHAR(2) NULL,
c_oficina VARCHAR(5) NULL,
c_CP VARCHAR(5) NULL,
c_tipo_asenta VARCHAR(2) NULL,
c_mnpio VARCHAR(3) NULL,
id_asenta_cpcons INT NULL,
d_zona VARCHAR(10) NULL,
c_cve_ciudad VARCHAR(4) NULL
);

3. Insert data into database

LOAD DATA LOCAL INFILE '/home/ara/git/PostalCodeSearch/Data/CPdescargatxt/CPdescarga.txt' #### This is an example, replace with your own path
INTO TABLE cp
CHARACTER SET latin1
FIELDS TERMINATED BY '|'
LINES TERMINATED BY '\n'
IGNORE 2 LINES
(d_codigo, d_asenta, d_tipo_asenta, D_mnpio, d_estado, d_ciudad, d_CP, c_estado, c_oficina, c_CP, c_tipo_asenta, c_mnpio, id_asenta_cpcons, d_zona, c_cve_ciudad);

4. Create indexes for easy autocomplete 

CREATE INDEX idx_asenta_prefix ON cp (d_asenta);
CREATE INDEX idx_mnpio_prefix ON cp (D_mnpio);

5. Create specific app user with all privileges 
ALTER USER 'root'@'localhost' IDENTIFIED BY '1234';
FLUSH PRIVILEGES;

CREATE USER 'flaskuser'@'localhost' IDENTIFIED BY 'flaskpass';
GRANT ALL PRIVILEGES ON codigos_postales.* TO 'flaskuser'@'localhost';
FLUSH PRIVILEGES;

